<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="IterExt.html">IterExt</a></li></li><li><li><a href="Sequence.html">Sequence</a></li></li><li><li><a href="Sort.html">Sort</a></li></li><li><li><a href="Stream.html">Stream</a></li></li><li><li><a href="StreamCell.html">StreamCell</a></li></li><li><li><a href="Text.html">Text</a></li></li><li><li><a href="TrieExt.html">TrieExt</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.Sequence">Sequence</a></li></li><li><li><a href="#type.Branch">Branch</a></li></li><li><li><a href="#type.Pos">Pos</a></li></li><li><li><a href="#type.Level">Level</a></li></li><li><li><a href="#type.Stream">Stream</a></li></li><li><li><a href="#empty">empty</a></li></li><li><li><a href="#make">make</a></li></li><li><li><a href="#branch">branch</a></li></li><li><li><a href="#makeAppend">makeAppend</a></li></li><li><li><a href="#defaultAppend">defaultAppend</a></li></li><li><li><a href="#appendLevel">appendLevel</a></li></li><li><li><a href="#fromArray">fromArray</a></li></li><li><li><a href="#size">size</a></li></li><li><li><a href="#get">get</a></li></li><li><li><a href="#split">split</a></li></li><li><li><a href="#slice">slice</a></li></li><li><li><a href="#pushBack">pushBack</a></li></li><li><li><a href="#popFront">popFront</a></li></li><li><li><a href="#popBack">popBack</a></li></li><li><li><a href="#peekBack">peekBack</a></li></li><li><li><a href="#peekFront">peekFront</a></li></li><li><li><a href="#pushFront">pushFront</a></li></li><li><li><a href="#binaryOp">binaryOp</a></li></li><li><li><a href="#monoid">monoid</a></li></li><li><li><a href="#foldUp">foldUp</a></li></li><li><li><a href="#branchChild">branchChild</a></li></li><li><li><a href="#foldDir">foldDir</a></li></li><li><li><a href="#iter">iter</a></li></li><li><li><a href="#fromAssocList">fromAssocList</a></li></li><li><li><a href="#fromTrie">fromTrie</a></li></li><li><li><a href="#tokens">tokens</a></li></li></ul></nav><div class="documentation"><h1>Sequence</h1><div class="declaration"><h4 class="type-declaration" id="type.Sequence"><span class="keyword">type </span><span class="type">Sequence</span>&lt;<span class="type">X</span>&gt; = {#branch : <a href="#type.Branch"><span class="type">Branch</span></a>&lt;<span class="type">X</span>&gt;; #leaf : <span class="type">X</span>; #empty}</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Branch"><span class="keyword">type </span><span class="type">Branch</span>&lt;<span class="type">X</span>&gt; = { left : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;; right : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;; level : <a href="#type.Level"><span class="type">Level</span></a>; size : <span class="type">Nat</span> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Pos"><span class="keyword">type </span><span class="type">Pos</span> = <span class="type">Nat</span></h4><p><p>identify positions uniquely</p>
<p>(generally not sequential numbers)</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.Level"><span class="keyword">type </span><span class="type">Level</span> = <span class="type">Nat32</span></h4><p><p>see POPL paper</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.Stream"><span class="keyword">type </span><span class="type">Stream</span>&lt;<span class="type">X</span>&gt; = <a href="Stream.html#type.Stream"><span class="type">Stream.Stream</span></a>&lt;<span class="type">X</span>&gt;</h4><p></p></div><div class="declaration"><h4 class="function" id="empty"><code><span class="keyword">public func </span><span class="fnname">empty</span>&lt;<span class="type">X</span>&gt;() : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="make"><code><span class="keyword">public func </span><span class="fnname">make</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">data</span> : <span class="type">X</span>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="branch"><code><span class="keyword">public func </span><span class="fnname">branch</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">l</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">midLev</span> : <a href="#type.Level"><span class="type">Level</span></a>, <br/>  <span class="parameter">r</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;<br/>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="makeAppend"><code><span class="keyword">public func </span><span class="fnname">makeAppend</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">levels</span> : <a href="#type.Stream"><span class="type">Stream</span></a>&lt;<a href="#type.Level"><span class="type">Level</span></a>&gt;) : &lt;<span class="type">X</span>&gt;(<a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;) -&gt; <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="defaultAppend"><code><span class="keyword">public func </span><span class="fnname">defaultAppend</span>&lt;<span class="type">X</span>&gt;() : &lt;<span class="type">X</span>&gt;(<a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;) -&gt; <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="appendLevel"><code><span class="keyword">public func </span><span class="fnname">appendLevel</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">s1</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">midLev</span> : <span class="type">Nat32</span>, <br/>  <span class="parameter">s2</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;<br/>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="fromArray"><code><span class="keyword">public func </span><span class="fnname">fromArray</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">array</span> : [<span class="type">X</span>], <span class="parameter">levels</span> : <a href="#type.Stream"><span class="type">Stream</span></a>&lt;<a href="#type.Level"><span class="type">Level</span></a>&gt;) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="size"><code><span class="keyword">public func </span><span class="fnname">size</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;) : <span class="type">Nat</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="get"><code><span class="keyword">public func </span><span class="fnname">get</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <span class="parameter">pos</span> : <span class="type">Nat</span>) : ?<span class="type">X</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="split"><code><span class="keyword">public func </span><span class="fnname">split</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <span class="parameter">size1</span> : <span class="type">Nat</span>) : (<a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;)</code></h4><p><p>split sequence into a pair where the first has the given size</p>
<p>for insufficient sequence values, the first result is the full input, and the second result is empty</p>
</p></div><div class="declaration"><h4 class="function" id="slice"><code><span class="keyword">public func </span><span class="fnname">slice</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">start</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">size</span> : <span class="type">Nat</span><br/>) : (<a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="pushBack"><code><span class="keyword">public func </span><span class="fnname">pushBack</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">seq</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">level</span> : <a href="#type.Level"><span class="type">Level</span></a>, <br/>  <span class="parameter">data</span> : <span class="type">X</span><br/>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="popFront"><code><span class="keyword">public func </span><span class="fnname">popFront</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">seq</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;) : ?(<span class="type">X</span>, <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="popBack"><code><span class="keyword">public func </span><span class="fnname">popBack</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">seq</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;) : ?(<a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <span class="type">X</span>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="peekBack"><code><span class="keyword">public func </span><span class="fnname">peekBack</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">seq</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;) : ?<span class="type">X</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="peekFront"><code><span class="keyword">public func </span><span class="fnname">peekFront</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">seq</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;) : ?<span class="type">X</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="pushFront"><code><span class="keyword">public func </span><span class="fnname">pushFront</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">data</span> : <span class="type">X</span>, <br/>  <span class="parameter">level</span> : <a href="#type.Level"><span class="type">Level</span></a>, <br/>  <span class="parameter">seq</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;<br/>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="binaryOp"><code><span class="keyword">public func </span><span class="fnname">binaryOp</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">zero</span> : <span class="type">X</span>, <br/>  <span class="parameter">bop</span> : (<span class="type">X</span>, <span class="type">X</span>) -&gt; <span class="type">X</span><br/>) : <span class="type">X</span></code></h4><p><p>Perform <a href="https://en.wikipedia.org/wiki/Monoid#Definition">an associative, binary operation</a> over the binary tree.</p>
<p>Like monoid, but simpler (common input and output type).</p>
</p></div><div class="declaration"><h4 class="function" id="monoid"><code><span class="keyword">public func </span><span class="fnname">monoid</span>&lt;<span class="type">X</span>, <span class="type">Y</span>&gt;(<br/>  <span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">id</span> : <span class="type">Y</span>, <br/>  <span class="parameter">leaf</span> : <span class="type">X</span> -&gt; <span class="type">Y</span>, <br/>  <span class="parameter">binOp</span> : (<span class="type">Y</span>, <span class="type">Y</span>) -&gt; <span class="type">Y</span><br/>) : <span class="type">Y</span></code></h4><p><p>Transform sequence into <a href="https://en.wikipedia.org/wiki/Monoid#Definition">monoid structure</a></p>
<p>The monoid's id element stands in for empty sequences.</p>
<p>The leaf function maps a leaf element to a monoid element.</p>
<p>The function binOp gives the monoid's binary operation over elements.</p>
</p></div><div class="declaration"><h4 class="function" id="foldUp"><code><span class="keyword">public func </span><span class="fnname">foldUp</span>&lt;<span class="type">X</span>, <span class="type">Y</span>&gt;(<br/>  <span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">empty</span> : <span class="type">Y</span>, <br/>  <span class="parameter">leaf</span> : <span class="type">X</span> -&gt; <span class="type">Y</span>, <br/>  <span class="parameter">branch</span> : (<a href="#type.Branch"><span class="type">Branch</span></a>&lt;<span class="type">X</span>&gt;, <span class="type">Y</span>, <span class="type">Y</span>) -&gt; <span class="type">Y</span><br/>) : <span class="type">Y</span></code></h4><p><p>Like monoid, except that branch function gets full branch node info</p>
</p></div><div class="declaration"><h4 class="function" id="branchChild"><code><span class="keyword">public func </span><span class="fnname">branchChild</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">b</span> : <a href="#type.Branch"><span class="type">Branch</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">rank</span> : {#fst; #snd}, <br/>  <span class="parameter">dir</span> : {#fwd; #bwd}<br/>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;</code></h4><p><p>Relate child order and iteration order.</p>
<p>(all defined here, in code)</p>
</p></div><div class="declaration"><h4 class="function" id="foldDir"><code><span class="keyword">public func </span><span class="fnname">foldDir</span>&lt;<span class="type">X</span>, <span class="type">Y</span>&gt;(<br/>  <span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">dir</span> : {#fwd; #bwd}, <br/>  <span class="parameter">empty</span> : <span class="type">Y</span>, <br/>  <span class="parameter">leaf</span> : ?((<span class="type">Y</span>, <span class="type">X</span>) -&gt; <span class="type">Y</span>), <br/>  <span class="parameter">preBranch</span> : ?((<span class="type">Y</span>, <a href="#type.Branch"><span class="type">Branch</span></a>&lt;<span class="type">X</span>&gt;) -&gt; <span class="type">Y</span>), <br/>  <span class="parameter">midBranch</span> : ?((<span class="type">Y</span>, <a href="#type.Branch"><span class="type">Branch</span></a>&lt;<span class="type">X</span>&gt;) -&gt; <span class="type">Y</span>), <br/>  <span class="parameter">postBranch</span> : ?((<span class="type">Y</span>, <a href="#type.Branch"><span class="type">Branch</span></a>&lt;<span class="type">X</span>&gt;) -&gt; <span class="type">Y</span>)<br/>) : <span class="type">Y</span></code></h4><p><p>Fold with directed sequential dependencies.</p>
<p> Folds the binary tree into an accumulated value, forward or backward.</p>
<p> Each function is optional, and behaves like the identity function when <code>null</code>.</p>
<p> Branch case accumulates across five steps:</p>
<pre><code>- two subtrees of the branch, and
- three points surrounding them (pre, mid, post branch).</code></pre><p> Leaf case accepts an accumulator, initially <code>empty</code>.</p>
</p></div><div class="declaration"><h4 class="function" id="iter"><code><span class="keyword">public func </span><span class="fnname">iter</span>&lt;<span class="type">X</span>&gt;(<span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <span class="parameter">dir</span> : {#fwd; #bwd}) : <span class="type">Iter.Iter</span>&lt;<span class="type">X</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="fromAssocList"><code><span class="keyword">public func </span><span class="fnname">fromAssocList</span>&lt;<span class="type">K</span>, <span class="type">V</span>, <span class="type">T</span>&gt;(<span class="parameter">l</span> : <span class="type">List.List</span>&lt;(<span class="type">Trie.Key</span>&lt;<span class="type">K</span>&gt;, <span class="type">V</span>)&gt;, <span class="parameter">kv</span> : (<span class="type">Trie.Key</span>&lt;<span class="type">K</span>&gt;, <span class="type">V</span>) -&gt; <span class="type">T</span>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">T</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="fromTrie"><code><span class="keyword">public func </span><span class="fnname">fromTrie</span>&lt;<span class="type">K</span>, <span class="type">V</span>, <span class="type">T</span>&gt;(<span class="parameter">t</span> : <span class="type">Trie.Trie</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <span class="parameter">kv</span> : (<span class="type">Trie.Key</span>&lt;<span class="type">K</span>&gt;, <span class="type">V</span>) -&gt; <span class="type">T</span>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">T</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="tokens"><code><span class="keyword">public func </span><span class="fnname">tokens</span>&lt;<span class="type">X</span>&gt;(<br/>  <span class="parameter">s</span> : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;, <br/>  <span class="parameter">isDelim</span> : <span class="type">X</span> -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">levels</span> : <a href="#type.Stream"><span class="type">Stream</span></a>&lt;<a href="#type.Level"><span class="type">Level</span></a>&gt;<br/>) : <a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<a href="#type.Sequence"><span class="type">Sequence</span></a>&lt;<span class="type">X</span>&gt;&gt;</code></h4><p><p>separate into (nested) sub-sequences by looking for sub-sequence delimiter elements (omitted from output)</p>
</p></div></div></body></html>